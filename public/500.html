
カリキュラム
エラーページ【例外処理の方法について】
エラーページ
目的
例外処理を実装できるようになる
今回のテーマ
ユーザー用のエラー画面を作成しましょう。
今回は、例外処理について学んでいきます。

例外処理とは
このような画面を見たことがあるでしょうか。
この画面は、(GitHubの)エラーページです。
これは、ユーザが存在しないページにアクセスする際に起こる404エラーであること示しています。

https://diveintocode.gyazo.com/1c72e2305c602b69840e556814c66584

主なエラー

500 Internal Sever Error(Webサーバーの何らかのエラー)
403 Forbidden(要求されたページは存在するが、権限がない)
404 Not Found(要求されたページが存在しない)
https://diveintocode.gyazo.com/e79aff9a99c1c5bd64dff690114a03d9

デフォルトで本番環境（heroku）に上げているアプリケーションでは、このようなエラーページが表示されます。
エラーによって適切なエラーページを表示させることで、ユーザがエラーが起こった際にどのような行動を取ればよいか、示すことができるようにしましょう。

Railsでの例外処理について
Railsでは、500エラーと404エラーについては、自動でエラーをキャッチし、予め用意されている500ページと、404ページを出力するようになっています。
そこで、そのページを分かりやすいようにデザインしましょう。

404エラーぺージ、500エラーぺージを作成する。
次に、テキストの文頭にあった、GitHubのようなエラー画面を表示させるようにします。

画像をダウンロードし、public内に保存する
https://github.com/DiveintoCode-corp/v2-achieve/tree/day13/public
上記のリンクから404.pngと、500.pngをpublicフォルダ配下に保存する。

public/404.htmlの内容を以下に書き換える。
public/404.html

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
<!DOCTYPE html>
<html>
<head>
  <title>The page you were looking for doesn't exist (404)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
  .error {
    padding-top: 16%
  }
  p{
    text-align: center;
  }
  img{
    display: block;
    margin: 0 auto;
  }
  </style>
</head>

<body>
  <!-- This file lives in public/404.html -->
  <div class="error">
    <img src="/404.png">
    <p>お探しのページは見つかりません。</p>
  </div>
</body>
</html>
public/500.htmlの内容を以下に書き換える
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
<!DOCTYPE html>
<html>
<head>
  <title>The page you were looking for doesn't exist (404)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
  .error {
    padding-top: 16%
  }
  p{
    text-align: center;
  }
  img{
    display: block;
    margin: 0 auto;
  }
  </style>
</head>

<body>
  <!-- This file lives in public/500.html -->
  <div class="error">
    <img src="/500.png">
    <p>一時的なエラーが発生しました。</p>
  </div>
</body>
</html>
